# This workflow will build a Java project with Maven, and cache/restore any dependencies to improve the workflow execution time
# For more information see: https://help.github.com/actions/language-and-framework-guides/building-and-testing-java-with-maven

name: Deploy the

on:
  push:
    branches: [ main ]

jobs:


  clone:
    steps:
      - uses: actions/checkout@master
        with:
          name: https://github.com/admin-shell-io/aas-specs
          ref: refs/heads/release
          path: ./aas-specs

      - name: Show Working directory
        run: ls

#  build:

#    runs-on: ubuntu-latest

#    steps:
#    - uses: actions/checkout@v2
#    - name: Set up JDK 11
#      uses: actions/setup-java@v2
#      with:
#        java-version: '11'
#        distribution: 'adopt'
#        cache: maven
#    - name: Build with Maven
#      run: mvn -P CI-AAS -B package --file pom.xml

  deploy:
    steps:
      - uses: actions/checkout@master
        with:
          name: https://github.com/admin-shell-io/java-model
          ref: refs/heads/release
          path: ./java-model

      - name: Show Working directory
        run: ls

      - name: Copy the generated files into the cloned repo
        run: cp ./aas/src/main/java/io/adminshell/aas/v3/model/* ./java-model/aas/src/main/java/io/adminshell/aas/v3/model/

      - name: Add all new files
        run: git add ./java-model/aas/src/main/java/io/adminshell/aas/v3/model/*

      - name: Write a commit message
        run: git commit -m "this is an automated commit that was triggered by a change in the master branch of https://github.com/admin-shell-io/java-generator/"

      - name: Git Push
        run: git push
